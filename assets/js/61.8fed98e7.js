(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{381:function(t,e,n){"use strict";n.r(e);var s=n(33),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"template-的解析过程，render-function-原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#template-的解析过程，render-function-原理"}},[t._v("#")]),t._v(" template 的解析过程，render function 原理")]),t._v(" "),n("p",[t._v("template 只是一个简单的字符串，但它真正的要显示到 html 上面，变成一个真正的 html 节点，这个过程到底是怎么样的呢？")]),t._v(" "),n("p",[t._v("其实我们在使用 template 的时候，它最终会经过生命周期里面的一个过程，叫做编译。")]),t._v(" "),n("p",[t._v("把它编译成了一个 js 的函数，叫做 render function。")]),t._v(" "),n("p",[t._v("那么 render 方法里面做了什么事情呢？")]),t._v(" "),n("p",[t._v("render 方法里面 return 的是通过 this.$createElement 进行创建的，$createElement 是一个创建节点的函数。每一个 Vue 实例上面都会有这个函数。")]),t._v(" "),n("p",[t._v("同时我们在使用 render 方法的时候，它也会传进来一个 $createElement 函数。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n等同于\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[n("img",{attrs:{src:"/img/vue-12-1.png",alt:"在这里插入图片描述"}}),t._v("\n我们可以看到，用 render 和 template 显示的是一样的效果。")]),t._v(" "),n("h4",{attrs:{id:"createelement-中："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#createelement-中："}},[t._v("#")]),t._v(" createElement 中：")]),t._v(" "),n("p",[t._v("第一个参数：我们传入的是需要创建的节点名字，它可以是个组件，也可以是个 DOM 节点，比如上图中传入的 'span'。")]),t._v(" "),n("p",[t._v("第二个参数：代表着我们要传给节点上面的一些属性，它的 attr，props，ref 还有其他的事件监听等等，都是通过这个对象进行表达的。")]),t._v(" "),n("p",[t._v("第三个参数：代表着节点里面的内容。它可以是一系列的子节点，也可以是直接的字符串。如果使用了字符串，就不需要使用数组。如果使用了子节点，就需要使用数组去表明。")]),t._v(" "),n("p",[t._v("这就是 render function 的原理，我们的 template 最终都会被编译成这个方法，而不仅仅是说我们看到一个 template，就代表着它会自动的帮我们去渲染到 html 里面。")]),t._v(" "),n("p",[t._v("createElement 其实就是一个虚拟 DOM 的概念，它创建出来的并不是真正的 html 节点，而是一个叫做 VNode 的类。")]),t._v(" "),n("p",[t._v("VNode 在内存里面存储的是类似于一个 DOM 结构的结构。它会去跟真正的 DOM 结构进行一些对比。")]),t._v(" "),n("p",[t._v("如果发现这部分 DOM 节点需要更新，才会真正的把 VNode 转换成一个 DOM 的内容，然后把它填充到真正的 DOM 里面去。")]),t._v(" "),n("p",[t._v("所以这也是 Vue 真正高性能的原理。")])])}),[],!1,null,null,null);e.default=a.exports}}]);