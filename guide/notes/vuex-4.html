<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>模块功能 modules | Jason 前端进阶</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/img/logo.ico">
    <script charset="utf-8" src="/js/main.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    <meta name="description" content="高级前端进阶之路">
    <link rel="preload" href="/assets/css/0.styles.80b48331.css" as="style"><link rel="preload" href="/assets/js/app.fe207f91.js" as="script"><link rel="preload" href="/assets/js/2.e6b4d0ca.js" as="script"><link rel="preload" href="/assets/js/80.3bfc575d.js" as="script"><link rel="prefetch" href="/assets/js/10.886e30c4.js"><link rel="prefetch" href="/assets/js/11.1793a4f2.js"><link rel="prefetch" href="/assets/js/12.78cb9d95.js"><link rel="prefetch" href="/assets/js/13.ffafeb4c.js"><link rel="prefetch" href="/assets/js/14.95174dd6.js"><link rel="prefetch" href="/assets/js/15.39e4bb49.js"><link rel="prefetch" href="/assets/js/16.ed6883e3.js"><link rel="prefetch" href="/assets/js/17.8e71d8f3.js"><link rel="prefetch" href="/assets/js/18.4911f176.js"><link rel="prefetch" href="/assets/js/19.dda85ec2.js"><link rel="prefetch" href="/assets/js/20.5c85942a.js"><link rel="prefetch" href="/assets/js/21.ac606178.js"><link rel="prefetch" href="/assets/js/22.0d67f65e.js"><link rel="prefetch" href="/assets/js/23.66e1016a.js"><link rel="prefetch" href="/assets/js/24.fb2e0804.js"><link rel="prefetch" href="/assets/js/25.e6737d1a.js"><link rel="prefetch" href="/assets/js/26.6e989c90.js"><link rel="prefetch" href="/assets/js/27.73d44081.js"><link rel="prefetch" href="/assets/js/28.b64d0788.js"><link rel="prefetch" href="/assets/js/29.480d7e74.js"><link rel="prefetch" href="/assets/js/3.1f7082e1.js"><link rel="prefetch" href="/assets/js/30.086ac528.js"><link rel="prefetch" href="/assets/js/31.2b53cfcc.js"><link rel="prefetch" href="/assets/js/32.b09d31de.js"><link rel="prefetch" href="/assets/js/33.d5e6c288.js"><link rel="prefetch" href="/assets/js/34.5f7703f9.js"><link rel="prefetch" href="/assets/js/35.d0f6f1e4.js"><link rel="prefetch" href="/assets/js/36.dae3b03b.js"><link rel="prefetch" href="/assets/js/37.0083346a.js"><link rel="prefetch" href="/assets/js/38.9fd4c6a6.js"><link rel="prefetch" href="/assets/js/39.043476c8.js"><link rel="prefetch" href="/assets/js/4.a21579d8.js"><link rel="prefetch" href="/assets/js/40.9023020a.js"><link rel="prefetch" href="/assets/js/41.255abcfd.js"><link rel="prefetch" href="/assets/js/42.c36397d3.js"><link rel="prefetch" href="/assets/js/43.a81cab53.js"><link rel="prefetch" href="/assets/js/44.c0dd8e75.js"><link rel="prefetch" href="/assets/js/45.45adf40a.js"><link rel="prefetch" href="/assets/js/46.7595c88e.js"><link rel="prefetch" href="/assets/js/47.4d17fd72.js"><link rel="prefetch" href="/assets/js/48.da0b0ee3.js"><link rel="prefetch" href="/assets/js/49.7f3465bc.js"><link rel="prefetch" href="/assets/js/5.7352ca66.js"><link rel="prefetch" href="/assets/js/50.6b748268.js"><link rel="prefetch" href="/assets/js/51.b4e091f3.js"><link rel="prefetch" href="/assets/js/52.9850325c.js"><link rel="prefetch" href="/assets/js/53.c5c49af7.js"><link rel="prefetch" href="/assets/js/54.2a9c10cb.js"><link rel="prefetch" href="/assets/js/55.1a14a31c.js"><link rel="prefetch" href="/assets/js/56.d0385ab7.js"><link rel="prefetch" href="/assets/js/57.0d61cc58.js"><link rel="prefetch" href="/assets/js/58.211c43e7.js"><link rel="prefetch" href="/assets/js/59.a89e610d.js"><link rel="prefetch" href="/assets/js/6.7ab37770.js"><link rel="prefetch" href="/assets/js/60.5ad24ba8.js"><link rel="prefetch" href="/assets/js/61.8fed98e7.js"><link rel="prefetch" href="/assets/js/62.5ff19400.js"><link rel="prefetch" href="/assets/js/63.1e254a17.js"><link rel="prefetch" href="/assets/js/64.9f65fa2b.js"><link rel="prefetch" href="/assets/js/65.5cfba8f1.js"><link rel="prefetch" href="/assets/js/66.3db7f647.js"><link rel="prefetch" href="/assets/js/67.0d2d53e6.js"><link rel="prefetch" href="/assets/js/68.78c712c1.js"><link rel="prefetch" href="/assets/js/69.21368aea.js"><link rel="prefetch" href="/assets/js/7.383be195.js"><link rel="prefetch" href="/assets/js/70.9bcc4c27.js"><link rel="prefetch" href="/assets/js/71.246c09b6.js"><link rel="prefetch" href="/assets/js/72.12fc5ba7.js"><link rel="prefetch" href="/assets/js/73.c28a8ca7.js"><link rel="prefetch" href="/assets/js/74.f9f22ca4.js"><link rel="prefetch" href="/assets/js/75.3a3f982b.js"><link rel="prefetch" href="/assets/js/76.cf0527a8.js"><link rel="prefetch" href="/assets/js/77.87ec4306.js"><link rel="prefetch" href="/assets/js/78.6193be1a.js"><link rel="prefetch" href="/assets/js/79.8e784f6a.js"><link rel="prefetch" href="/assets/js/8.286b1215.js"><link rel="prefetch" href="/assets/js/81.52a215e7.js"><link rel="prefetch" href="/assets/js/82.114505b1.js"><link rel="prefetch" href="/assets/js/83.c0705be9.js"><link rel="prefetch" href="/assets/js/84.62f23595.js"><link rel="prefetch" href="/assets/js/85.7bc4899f.js"><link rel="prefetch" href="/assets/js/86.38315c59.js"><link rel="prefetch" href="/assets/js/9.52cf029f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.80b48331.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jason 前端进阶</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  学习笔记
</a></div><div class="nav-item"><a href="/baodian/zero/" class="nav-link">
  面试宝典
</a></div><div class="nav-item"><a href="/golang/" class="nav-link">
  Golang
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  学习笔记
</a></div><div class="nav-item"><a href="/baodian/zero/" class="nav-link">
  面试宝典
</a></div><div class="nav-item"><a href="/golang/" class="nav-link">
  Golang
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript 基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript 基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue 基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vuex 篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/notes/vuex-1.html" class="sidebar-link">基础配置，store</a></li><li><a href="/guide/notes/vuex-2.html" class="sidebar-link">可维护性目录结构，getters，mapState，mapGetters</a></li><li><a href="/guide/notes/vuex-3.html" class="sidebar-link">mutations，actions，mapMutations，mapActions</a></li><li><a href="/guide/notes/vuex-4.html" class="active sidebar-link">模块功能 modules</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide/notes/vuex-5.html" class="sidebar-link">动态注册模块，热更替功能</a></li><li><a href="/guide/notes/vuex-6.html" class="sidebar-link">解绑模块，watch，subscribe 和 subscribeAction，plugins，Vuex 整体结构和运行过程</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue 源码篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React 篇</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="模块功能-modules"><a href="#模块功能-modules" class="header-anchor">#</a> 模块功能 modules</h1> <h3 id="vuex-的模块功能："><a href="#vuex-的模块功能：" class="header-anchor">#</a> Vuex 的模块功能：</h3> <p>Vuex 是可以分模块的，因为在我们应用变的越来越大的过程当中，如果只有一个模块来维护我们的状态，那么可能你这个模块里面，它的内容就会变的非常多，非常的复杂，对于可维护性就不是那么高。那么这个时候，Vuex 就为我们提供了一个分模块的功能。</p> <p>其实模块的使用方法，跟我们直接使用 Vuex 的方法差不多，但是它里面会有一些细节的内容来告诉我们具体怎么去做。</p> <p>那么模块是什么呢？就是 modules。</p> <p>在 modules 下面你可以申明各种不同的 state，mutations，getters，actions。</p> <p>然后你可以给它这个模块加一个名字，那么你这个模块就会有一个作用域。比如：
<img src="/img/vuex-4-1.png" alt="在这里插入图片描述"></p> <p>这就是我们通过不同的模块去调用它的 state 的方法。</p> <p>通过 a，b 它们的命名空间，来调用它们专属的一个 state。</p> <p>这样的话，你有不同的模块，就可以非常清晰的去判断，你要去调用的是哪个模块的数据。</p> <p>那么如果要通过 mapState 来进行调用呢？</p> <p>我们就不能通过名字来调用属性了，必须通过一个对象的映射关系来进行书写。
<img src="/img/vuex-4-2.png" alt="在这里插入图片描述"></p> <h3 id="mutations："><a href="#mutations：" class="header-anchor">#</a> mutations：</h3> <p><img src="/img/vuex-4-3.png" alt="在这里插入图片描述"></p> <p>可以看到，我们也可以直接写到 mapMutations 里面去做，它是生效的。</p> <p>那么我们为什么没有跟刚才调用 state 一样，它要申明一个模块下面的 mutations 呢？</p> <p>这是因为 Vuex 默认会把所有的 mutations 都给它放到全局的命名空间当中。</p> <p>如果你要让 a 模块里面的 mutations（它的命名空间是在 a 模块下面的）不跟我们全局的命名空间进行一个冲突，那么你需要申明一个属性 namespaced: true。</p> <p>那么这有什么好处呢？这样的话，我们每一个模块里面，你都可以写相同名字的 mutations 和 actions。</p> <p>因为在 Vuex 里面，你如果申明了 2 个相同名字的 mutations，那么它就是一个冲突的关系，你是不可能 2 个都同时存在的。</p> <p>因为作为一个 object，同一个名字的变量，它就只能有一个。</p> <p>所以，如果你的 mutations 会变的非常的多，而且你很难控制你每一个 mutations 的名字都是不一样的。那么你完全可以加上 namespaced: true，如果你加上这个之后，你就会发现我们刚才的这种调用方法不对。
<img src="/img/vuex-4-4.png" alt="在这里插入图片描述"></p> <p>我们可以看到，Vuex 报错了，它不知道有这样一个 mutation 的 type。</p> <p>那这个时候，如果我们要调用这个 mutations，要怎么做呢？</p> <p>我们要使用一个命名空间：</p> <p><img src="/img/vuex-4-5.png" alt="在这里插入图片描述"></p> <p>所以这就是一个命名空间的概念。</p> <p>你可以强制给你的模块去加入一个命名空间，这样的话，它所有的 mutations，actions，getters 都是在一个命名空间下面。</p> <p>它们不会起任何的冲突，所以你用的时候，也必须要在这个命名空间的下面。</p> <p>这样的一个好处就是你整体的规范性会比较强。</p> <p>我们要使用 getters，那么同样的我们要使用一个命名空间的方法：
<img src="/img/vuex-4-6.png" alt="在这里插入图片描述"></p> <p>但是这样的话，我们写在模版里面就会变的很奇怪，我们没有办法很好的去写，虽然说我们在方法里面可以进行一个调用。</p> <p>这种调用方式明显的不太好，因为我们要直接在我们的模版里面去写，这样就写不来了。</p> <p>那么我们可以给它命一个名，也就是说，我们这边的 mapGerrers，我们通过 object 的方式去做。</p> <p><img src="/img/vuex-4-7.png" alt="在这里插入图片描述"></p> <p>那么如果我们要在 a 模块下面的 getters，里面的 textPlus 方法里面，它依赖的值不仅仅是我们这个 a 模块里面的值，而是要全局模块下面的 state ，怎么做呢？</p> <p>其实我们在模块下面的 getters 是会接收到我们全局的 state。
<img src="/img/vuex-4-8.png" alt="在这里插入图片描述"></p> <p>那么同样的，在我们的 actions 里面，我们也可以拿到这些东西。</p> <p><img src="/img/vuex-4-9.png" alt="在这里插入图片描述">
可以看到，我们在这个 a 模块里面去 commit 的 mutations，它默认就是在我们当前这个模块里面的 mutations。</p> <p>也就是说，我们在 a 模块的这个 actions 里面，它 commit 的 updateText，它会自动在我们申明的 a 模块里面去找。</p> <p>它不会到全局里面去找。如果你要去全局找，你需要加上一个参数 { root: true }。</p> <p><img src="/img/vuex-4-10.png" alt="在这里插入图片描述"></p> <p>所以这就是我们在模块内部，去调用全局的 mutations。</p> <p>那么，同样的，你调用模块间的 mutations，你也要使用 { root: true }，然后你要把命名空间给它写完整。
<img src="/img/vuex-4-11.png" alt="在这里插入图片描述"></p> <p>所以这就是我们在使用 Vuex 模块的时候要注意的一些点。</p> <p>因为 Vuex 的模块功能其实非常的强大，它能够很好的帮我们去梳理代码。</p> <p>但是我们加入了模块之后，因为有一个命名空间的存在，所以它的复杂度肯定会相应的增加。</p> <p>如果这些细节的点你不知道，那么你会在开发的过程中，遇到非常多的坑要去踩。</p> <p>然后大家还要注意一点的就是，我们在模块里面，还可以再去申明模块。</p> <p>它是一个无限向下嵌套的过程，其使用方法也是跟上面一样的。</p> <p>你每增加一层模块，那么你相应的复杂度就会增加一层，所以你要把这个逻辑给它理清楚。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/25/2020, 12:33:10 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/notes/vuex-3.html" class="prev">
        mutations，actions，mapMutations，mapActions
      </a></span> <span class="next"><a href="/guide/notes/vuex-5.html">
        动态注册模块，热更替功能
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fe207f91.js" defer></script><script src="/assets/js/2.e6b4d0ca.js" defer></script><script src="/assets/js/80.3bfc575d.js" defer></script>
  </body>
</html>
